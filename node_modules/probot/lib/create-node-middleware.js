"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createNodeMiddleware = createNodeMiddleware;
const webhooks_1 = require("@octokit/webhooks");
const server_js_1 = require("./server/server.js");
const create_probot_js_1 = require("./create-probot.js");
/**
 * Create a Node/Express middleware.
 *
 * ```javascript
 * import { createServer } from "node:http"
 * import { createProbot, createNodeMiddleware } from "probot"
 *
 * const appFn = (app) => {
 *   app.on("issues.opened", async (context) => {
 *     const issueComment = context.issue({
 *       body: "Thanks for opening this issue!",
 *     });
 *     return context.octokit.issues.createComment(issueComment);
 *   });
 * };
 *
 * const middleware = createNodeMiddleware(appFn, { probot: createProbot() });
 *
 * const server = createServer((req, res) => {
 *   middleware(req, res, () => {
 *     res.writeHead(404);
 *     res.end();
 *   });
 * });
 * ```
 */
function createNodeMiddleware(appFn, { probot = (0, create_probot_js_1.createProbot)(), webhooksPath } = {}) {
    probot.load(appFn);
    return (0, webhooks_1.createNodeMiddleware)(probot.webhooks, {
        path: webhooksPath || probot.webhookPath || server_js_1.defaultWebhooksPath,
    });
}
//# sourceMappingURL=create-node-middleware.js.map